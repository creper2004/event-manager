# Event Manager API


Данный проект — **API для создания и планирования мероприятий**. Он предоставляет мощный и гибкий интерфейс для управления мероприятиями и локациями, позволяя пользователям легко взаимодействовать с системой.

## Стек технологий

В проекте использованы следующие технологии:

- **Spring Framework**: Основной фреймворк для построения веб-приложений.
- **Spring Security**: Для обеспечения безопасности приложения и управления доступом.
- **Spring Data JPA**: Упрощает работу с базой данных с помощью ORM (Hibernate).
- **Hibernate**: Для управления объектами и взаимодействия с реляционными базами данных.
- **Spring MVC**: Для реализации построения RESTful API.
- **PostgreSQL**: Реляционная база данных для хранения информации о мероприятиях и локациях.
- **JWT**: Для механизма авторизации
- **Maven**: Система управления проектами и сборки.

##### Основные возможности с примерами приведены ниже.

# Локации


## Получение всех локаций

- **Метод:** `GET /locations`
- **Описание:** Получение списка всех локаций. Доступно для всех авторизованных пользователей.
- **Ответ (успех 200):**
  ```json
  [
    {
      "id": 42,
      "name": "Ледовый дворец",
      "address": "г. СПб, Пятилеток 1",
      "capacity": 12300,
      "description": "Спортивно-концертный комплекс в Санкт-Петербурге"
    }
  ]
  ```


## Создание локации

- **Метод:** `POST /locations`
- **Описание:** Создание локации. Доступно только админам.
- **Тело:**
```json

  {
    "name": "Ледовый дворец",
    "address": "г. СПб, Пятилеток 1",
    "capacity": 12300,
    "description": "Спортивно-концертный комплекс в Санкт-Петербурге"
  }

```
- **Ответ (успех 201):**
```json
{
  "id": 42,
  "name": "Ледовый дворец",
  "address": "г. СПб, Пятилеток 1",
  "capacity": 12300,
  "description": "Спортивно-концертный комплекс в Санкт-Петербурге"
}
```


## Удаление локации по ID

- **Метод:** `DELETE /locations/{locationID}`
- **Описание:** Удаление локации. Доступно только админам.
- **Параметр:** 42
- **Ответ (успех 204):** Место успешно удалено


## Получить локацию по ID

- **Метод:** `GET /locations/{locationID}`
- **Описание:** Получить локацию по ID. Доступно авторизованным пользователям.
- **Параметр:** 42
- **Ответ (успех 200):**
```json
{
  "id": 42,
  "name": "Ледовый дворец",
  "address": "г. СПб, Пятилеток 1",
  "capacity": 12300,
  "description": "Спортивно-концертный комплекс в Санкт-Петербурге"
}
```

## Обновить локацию

- **Метод:** `PUT /locations/{locationID}`
- **Описание:** Обновить информацию о локации. Доступно только админам.
- **Параметр:** 42
- **Тело:**
```json

{
  "name": "Новое имя локации",
  "address": "Новый адрес",
  "capacity": 20000,
  "description": "Новое описание"
}

```
- **Ответ (успех 200):**
```json
{
  "id": 42,
  "name": "Новое имя локации",
  "address": "Новый адрес",
  "capacity": 20000,
  "description": "Новое описание"
}
```


# Мероприятия

## Создание нового мероприятия

- **Метод:** `POST /events`
- **Описание:** Создание мероприятия. Доступно только пользователям. Дата начала долнжна быть в будущем. Локация должна быть вместительна. Локация должна быть не занята в эту дату.
- **Тело:**
```json
{
  "date": "2025-01-23T04:56:07.000",
  "duration": 60,
  "cost": 1200,
  "maxPlaces": 10,
  "locationId": 10,
  "name": "Лекция по Java"
}

```
- **Ответ (успех 201):**
```json
{
  "occupiedPlaces": 15,
  "date": "2025-01-23T04:56:07.000",
  "duration": 60,
  "cost": 1200,
  "maxPlaces": 10,
  "locationId": 10,
  "name": "Лекция по Java",
  "id": 5,
  "ownerId": "10",
  "status": "WAIT_START"
}
```

## Удаление мероприятия

- **Метод:** `DELETE /events/{eventId}`
- **Описание:** Создание мероприятия. Доступно только админам или создателю мероприятия. Можно отменить только те мероприятия, которые только в ожидании старта.
- **Параметр:** 5
- **Ответ (успех 204):** Мероприятие успешно удалено


## Получение мероприятия по ID

- **Метод:** `GET /events/{id}`
- **Описание:** Полученеи мероприятия. Доступно только авторизованным пользователям.
- **Параметр:** 5
```
- **Ответ (успех 201):**
```json
{
  "occupiedPlaces": 15,
  "date": "2025-01-23T04:56:07.000",
  "duration": 60,
  "cost": 1200,
  "maxPlaces": 10,
  "locationId": 10,
  "name": "Лекция по Java",
  "id": 5,
  "ownerId": "10",
  "status": "WAIT_START"
}
```

## Обновление мероприятия

- **Метод:** `PUT /events/{eventId}`
- **Описание:** Обновление мероприятия. Доступно админам или создателю мероприятия. Локация должна быть вместительна и не занятой. Количество мест должно быть больше, чем уже записанных пользователей
- **Тело:**
```json
{
  "date": "2025-01-23T04:56:07.000",
  "duration": 60,
  "cost": 1200,
  "maxPlaces": 10,
  "locationId": 10,
  "name": "Лекция по Java"
}

```
- **Ответ (успех 201):**
```json
{
  "occupiedPlaces": 15,
  "date": "2025-01-23T04:56:07.000",
  "duration": 60,
  "cost": 1200,
  "maxPlaces": 10,
  "locationId": 10,
  "name": "Лекция по Java",
  "id": 5,
  "ownerId": "10",
  "status": "WAIT_START"
}
```

## Поиск мероприятий по фильтру

- **Метод:** `POST /events/search`
- **Описание:** Поиск мероприятий по фильтру. Доступно только авторизованным пользователям. Атрибуты тела запроса необязательны (можно указать 1 или все фильтры).
- **Тело:**
```json
{
  "durationMax": 120,
  "dateStartBefore": "2025-01-23T04:56:07.000",
  "placesMin": 10,
  "locationId": 5,
  "eventStatus": "WAIT_START",
  "name": "Лекция",
  "placesMax": 100,
  "costMin": 1000,
  "dateStartAfter": "2025-01-23T04:56:07.000",
  "costMax": 5000,
  "durationMin": 60
}

```
- **Ответ (успех 201):**
```json
[
  {
    "occupiedPlaces": 15,
    "date": "2025-01-23T04:56:07.000",
    "duration": 60,
    "cost": 1200,
    "maxPlaces": 10,
    "locationId": 0,
    "name": "Лекция по Java",
    "id": 42,
    "ownerId": "10",
    "status": "WAIT_START"
  }
]
```


## Получение мероприятий, созданных текущим пользователем

- **Метод:** `GET /events/my`
- **Описание:** Получение мероприятий, созданных текущим пользователем. Доступно только пользователям.
- **Ответ (успех 201):**
```json
[
  {
    "occupiedPlaces": 15,
    "date": "2025-01-23T04:56:07.000",
    "duration": 60,
    "cost": 1200,
    "maxPlaces": 10,
    "locationId": 0,
    "name": "Лекция по Java",
    "id": 42,
    "ownerId": "10",
    "status": "WAIT_START"
  }
]
```

# Регистрация на мероприятия

## Регистрация пользователя на мероприятие по ID

- **Метод:** `POST /events/registrations/{eventId}`
- **Описание:** Регистрация пользователя на мероприятие по ID мероприятия. Доступно только пользователям. Можно зарегистрироваться, если есть места, если мероприятие находится в ожидании начала и если пользователь ранее не регистрировался.
- **Параметр:** 5
- **Ответ (успех 200):** Регистрация прошла успешно

## Отмена регистрация пользователя на мероприятие по ID

- **Метод:** `DELETE /events/registrations/cancel/{eventId}`
- **Описание:** Отмена Регистрация пользователя на мероприятие по ID мероприятия. Доступно только пользователям. Можно отмнить регистрацию, если есть места, если мероприятие еще не началось.
- **Параметр:** 5
- **Ответ (успех 204):** Отмена регистрации прошла успешно


## Получение всех мероприятий, созданных пользователем

- **Метод:** `GET /events/registrations/my`
- **Описание:** Получение всех мероприятий, созданных пользователем. Доступно только пользователям.
- **Ответ (успех 200):**
```json
[
  {
    "occupiedPlaces": 15,
    "date": "2025-01-23T04:56:07.000",
    "duration": 60,
    "cost": 1200,
    "maxPlaces": 10,
    "locationId": 0,
    "name": "Лекция по Java",
    "id": 42,
    "ownerId": "10",
    "status": "WAIT_START"
  }
]
```
  
# Регистрация и аутентификация пользователей

## Регистрация пользователея
- **Метод:** `POST /users`
- **Описание:** Регистрация нового пользователя. Доступно всем.
- **Тело:**
```json
{
  "login": "new_user",
  "password": "strongpassword",
  "age": 21
}

```
- **Ответ (успех 201):**
```json
{
  "id": 10,
  "login": "user_login",
  "age": 21,
  "role": "USER"
}
```

## Авторизация пользователя
- **Метод:** `POST /users/auth`
- **Описание:**  Авторизация пользователя. Доступно всем.
- **Тело:**
```json
{
  "login": "user_login",
  "password": "userpassword"
}

```
- **Ответ (успех 200):**
```json
{
  "jwtToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```


## Получение информации о пользователе по ID
- **Метод:** `GET /users/{userId}`
- **Описание:** Получение информации о пользователе по ID. Доступно только админам.
- **Параметр:** 10

- **Ответ (успех 200):**
```json
{
  "id": 10,
  "login": "user_login",
  "age": 21,
  "role": "USER"
}
```
